{% extends "admin_base.html" %}
{% block content %}

<h2>{{ "Edit" if user else "New" }} User</h2>

<form method="post" style="max-width:700px;">

    <label>Username</label><br>
    <input type="text" name="username" style="width:100%; padding:8px;" value="{{ user.username if user else '' }}" {%
        if user %}readonly{% else %}required{% endif %}><br><br>

    <label>Email</label><br>
    <input type="email" name="email" style="width:100%; padding:8px;" value="{{ user.email if user else '' }}"
        required><br><br>

    {% if not user %}
    <label>Password</label><br>
    <input type="password" name="password" style="padding:8px; width:100%;" required><br><br>
    {% else %}
    <label>New Password (leave blank to keep current)</label><br>
    <input type="password" name="new_password" style="padding:8px; width:100%;"><br><br>
    {% endif %}

    <label>Date of Birth</label><br>
    <input type="date" name="dob" style="padding:8px;" value="{{ user.dob if user else '' }}"><br><br>

    <label>Gender</label><br>
    <select name="gender" style="padding:8px; width:220px;">
        <option value="">-- Select --</option>
        <option value="Male" {% if user and user.gender=='Male' %}selected{% endif %}>Male</option>
        <option value="Female" {% if user and user.gender=='Female' %}selected{% endif %}>Female</option>
        <option value="Other" {% if user and user.gender=='Other' %}selected{% endif %}>Other</option>
    </select><br><br>

    <label>Score</label><br>
    <input type="number" name="score" style="padding:8px; width:140px;" value="{{ user.score if user else 0 }}"
        min="0"><br><br>

    <label>
        <input type="checkbox" name="is_admin" {% if user and user.is_admin %}checked{% endif %}>
        Admin User
    </label><br><br>

    <button type="submit"
        style="background:#1976d2;color:#fff;padding:8px 14px;border:none;border-radius:4px;">Save</button>
    <a href="{{ url_for('admin.user_menu') }}" style="margin-left:12px;">Cancel</a>
</form>

{% endblock %}