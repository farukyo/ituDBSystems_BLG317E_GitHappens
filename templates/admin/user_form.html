{% extends "admin_base.html" %}
{% block content %}

<h2>{{ "Edit" if user else "New" }} User</h2>

<form method="post">

    <label>Username</label><br>
    <input type="text" name="username" value="{{ user.username if user else '' }}" {% if user %}readonly{% else
        %}required{% endif %}><br><br>

    <label>Email</label><br>
    <input type="email" name="email" value="{{ user.email if user else '' }}" required><br><br>

    {% if not user %}
    <label>Password</label><br>
    <input type="password" name="password" required><br><br>
    {% else %}
    <label>New Password (leave blank to keep current)</label><br>
    <input type="password" name="new_password"><br><br>
    {% endif %}

    <label>Date of Birth</label><br>
    <input type="date" name="dob" value="{{ user.dob if user else '' }}"><br><br>

    <label>Gender</label><br>
    <select name="gender">
        <option value="">-- Select --</option>
        <option value="Male" {% if user and user.gender=='Male' %}selected{% endif %}>Male</option>
        <option value="Female" {% if user and user.gender=='Female' %}selected{% endif %}>Female</option>
        <option value="Other" {% if user and user.gender=='Other' %}selected{% endif %}>Other</option>
    </select><br><br>

    <label>Score</label><br>
    <input type="number" name="score" value="{{ user.score if user else 0 }}" min="0"><br><br>

    <label>
        <input type="checkbox" name="is_admin" {% if user and user.is_admin %}checked{% endif %}>
        Admin User
    </label><br><br>

    <button type="submit">Save</button>
    <a href="{{ url_for('admin.user_menu') }}">Cancel</a>
</form>

{% endblock %}