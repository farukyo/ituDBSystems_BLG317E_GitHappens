{% extends "base.html" %}

{% block title %}{{ title | default("Movies") }} - BeeMD{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/movies.css') }}" />
{% endblock %}

{% block content %}
<div class="container">
    <h1>{{ title | default("All Movies") }}</h1>

    <div class="controls">
        <form action="{{ url_for('movies') }}" method="get" style="display: flex; gap: 10px; width: 100%;">
            <select id="genre" name="genre">
                <option value="">Select Genre</option>
                <option value="Action">Action</option>
                <option value="Drama">Drama</option>
                <option value="Comedy">Comedy</option>
                <option value="Sci-Fi">Sci-Fi</option>
            </select>

            <input type="text" name="q" placeholder="Search movies..." value="{{ request.args.get('q') or '' }}"
                style="flex: 1;">
            <button type="submit"
                style="background: var(--accent); color: #fff; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">Search</button>
        </form>
    </div>

    <div class="movie-list">
        {% if items %}
        {% for movie in items %}
        <div class="movie-item">
            <h3 class="movie-title">
                <a href="/movie/{{ movie.tconst }}">{{ movie.genre }} ({{ movie.description }})</a>
            </h3>
        </div>
        {% endfor %}
        {% else %}
        <div class="no-results">
            {% if request.args.get('q') %}
            <p>No results found for "{{ request.args.get('q') }}".</p>
            {% else %}
            <p>No movies available to display.</p>
            {% endif %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}